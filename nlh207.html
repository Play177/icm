<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NLH Defense Trainer - BB vs BTN</title>
    <style>
        :root {
            --bg: #0b0f14;
            --card: #121826;
            --muted: #8aa0b6;
            --text: #e6eef7;
            --accent: #4cc9f0;
            --call: #60a5fa;
            --fold: #f87171;
            --raise: #fbbf24;
            --3bet: #c084fc;
            --good: #2dd4bf;
            --bad: #f87171;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            background: linear-gradient(180deg, #0b0f14, #0c111a 60%);
            color: var(--text);
            font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial;
            min-height: 100vh;
            padding: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            max-width: 700px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #1f2937;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: var(--accent);
        }
        
        .header .subtitle {
            color: var(--muted);
            font-size: 15px;
            margin-bottom: 10px;
        }
        
        .range-info {
            background: rgba(76, 201, 240, 0.1);
            border: 1px solid var(--accent);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .quiz-card {
            background: var(--card);
            border: 1px solid #1f2937;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
            padding: 30px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .stats-display {
            display: flex;
            justify-content: space-around;
            margin: 0 0 25px 0;
            padding: 20px;
            background: #0e1626;
            border-radius: 12px;
            border: 1px solid #213042;
        }
        
        .stat-box {
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent);
        }
        
        .stat-label {
            font-size: 14px;
            color: var(--muted);
            margin-top: 5px;
        }
        
        .hand-display {
            font-size: 32px;
            margin: 20px 0 30px 0;
            padding: 25px;
            background: #0e1626;
            border-radius: 12px;
            border: 1px solid #213042;
            letter-spacing: 2px;
            min-height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }
        
        .card-chip {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 85px;
            height: 120px;
            border-radius: 10px;
            background: linear-gradient(145deg, #1a2232, #0e1626);
            border: 2px solid #2a3b52;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .card-chip b {
            font-size: 26px;
        }
        
        .s { color: #60a5fa; }
        .h { color: #fb7185; }
        .d { color: #f59e0b; }
        .c { color: #34d399; }
        
        .hand-notation {
            margin-top: 15px;
            font-size: 22px;
            color: var(--accent);
            font-weight: bold;
        }
        
        .decision-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        
        .decision-btn {
            padding: 22px 10px;
            border-radius: 12px;
            border: 2px solid;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-fold {
            background: rgba(248, 113, 113, 0.1);
            border-color: var(--fold);
            color: var(--fold);
        }
        
        .btn-call {
            background: rgba(96, 165, 250, 0.1);
            border-color: var(--call);
            color: var(--call);
        }
        
        .btn-3bet {
            background: rgba(192, 132, 252, 0.1);
            border-color: var(--3bet);
            color: var(--3bet);
        }
        
        .decision-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .feedback {
            margin: 25px 0;
            padding: 25px;
            border-radius: 12px;
            font-size: 18px;
            display: none;
        }
        
        .feedback.correct {
            background: rgba(45, 212, 191, 0.1);
            border: 1px solid var(--good);
            color: var(--good);
            display: block;
        }
        
        .feedback.incorrect {
            background: rgba(248, 113, 113, 0.1);
            border: 1px solid var(--bad);
            color: var(--bad);
            display: block;
        }
        
        .next-btn {
            padding: 18px 35px;
            border-radius: 12px;
            border: 2px solid var(--accent);
            background: rgba(76, 201, 240, 0.1);
            color: var(--accent);
            cursor: pointer;
            transition: all 0.15s ease;
            font-size: 18px;
            font-weight: bold;
            margin: 10px auto;
            display: none;
            width: 200px;
        }
        
        .next-btn:hover {
            background: rgba(76, 201, 240, 0.2);
            transform: translateY(-2px);
        }
        
        .range-percentage {
            color: var(--muted);
            font-size: 14px;
            margin-top: 10px;
            background: #0e1626;
            padding: 8px 15px;
            border-radius: 8px;
            display: inline-block;
        }
        
        .footer {
            margin-top: 30px;
            text-align: center;
            color: #8aa0b6;
            font-size: 0.9rem;
        }
        
        .action-explanation {
            margin-top: 15px;
            padding: 20px;
            background: #0e1626;
            border-radius: 8px;
            font-size: 15px;
            line-height: 1.5;
            text-align: left;
            border-left: 4px solid var(--accent);
        }
        
        .range-breakdown {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            padding: 15px;
            background: #0e1626;
            border-radius: 10px;
            border: 1px solid #213042;
        }
        
        .range-item {
            text-align: center;
            flex: 1;
            padding: 0 10px;
        }
        
        .range-percent {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .fold-percent { color: var(--fold); }
        .call-percent { color: var(--call); }
        .3bet-percent { color: var(--3bet); }
        
        .range-label {
            font-size: 14px;
            color: var(--muted);
        }
        
        @media (max-width: 600px) {
            .decision-buttons {
                grid-template-columns: 1fr;
            }
            
            .card-chip {
                width: 70px;
                height: 100px;
            }
            
            .card-chip b {
                font-size: 22px;
            }
            
            .hand-display {
                padding: 15px;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">

        
        <div class="quiz-card">
            <div class="stats-display">
                <div class="stat-box">
                    <div class="stat-value" id="currentScore">0</div>
                    <div class="stat-label">Puntuación</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="accuracy">0%</div>
                    <div class="stat-label">Precisión</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="handsPlayed">0</div>
                    <div class="stat-label">Manos</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="currentStreak">0</div>
                    <div class="stat-label">Racha actual</div>
                </div>
            </div>
            
            
            
            <div class="hand-display" id="handDisplay">
                <!-- Las cartas se mostrarán aquí -->
            </div>
            
            <div class="decision-buttons" id="decisionButtons">
                <button class="decision-btn btn-fold" onclick="checkDecision('FOLD')">FOLD</button>
                <button class="decision-btn btn-call" onclick="checkDecision('CALL')">CALL</button>
                <button class="decision-btn btn-3bet" onclick="checkDecision('3BET')">3-BET</button>
            </div>
            
            <div class="feedback" id="feedback">
                <!-- Feedback se mostrará aquí -->
            </div>
            
            <button class="next-btn" id="nextBtn" onclick="nextHand()">Siguiente Mano →</button>
        </div>
<div class="range-breakdown">
                <div class="range-item">
                    <div class="range-percent fold-percent" id="foldPercent">50.2%</div>
                    <div class="range-label">FOLD</div>
                </div>
                <div class="range-item">
                    <div class="range-percent call-percent" id="callPercent">35.8%</div>
                    <div class="range-label">CALL</div>
                </div>
                <div class="range-item">
                    <div class="range-percent 3bet-percent" id="betPercent">14.0%</div>
                    <div class="range-label">3-BET</div>
                </div>
            </div>
        
        <div class="footer">
            Entrenador de NLH - BB vs BTN | Rangos personales | v1.0
        </div>
    </div>

<script>
// =============================
// NLH DEFENSE TRAINER - BB vs BTN
// CON TUS RANGOS PERSONALES
// =============================

// TUS RANGOS PERSONALES
const RANGOS_BB_vs_BTN = {
    description: 'Defensa Big Blind vs apertura Botón (2.5x)',
    
    // TUS RANGOS EXACTOS
    '3BET': [
        // Pares 88+
        '88', '99', 'TT', 'JJ', 'QQ', 'KK', 'AA',
        // A5s+
        'A5s', 'A4s','ATs', 'AJs', 'AQs', 'AKs',
        // KJs+
        'KJs', 'KQs','K6s',
        // Q9s+
        'QJs', 'QTs','Q9s',
        // JTs+
        'JTs', 'J9s',
        // AQ+
        'AQo', 'AKo',
        // KQo+
        'KQo'
    ],
    
    'CALL': [
        // Pares 77-22
        '22', '33','44','55','66','77',
        // A5s-A2s
        'A2s', 'A3s', 'A9s', 'A8s','A7s','A6s',
        // KTs-K2s
        'K2s', 'K3s', 'K4s', 'K5s', 'K6s', 'K7s', 'K8s', 'K9s', 'KTs',
        // Q2s+
        'Q2s', 'Q3s', 'Q4s', 'Q5s', 'Q6s', 'Q7s', 'Q8s', 'Q9s', 'QTs', 'QJs',
        // J3s+
        'J3s', 'J4s', 'J5s', 'J6s', 'J7s', 'J8s', 'J9s', 'JTs',
        // T4s+
        'T4s', 'T5s', 'T6s', 'T7s', 'T8s', 'T9s',
        // 95s+
        '95s', 'T5s', 'J5s', 'Q5s', 'K5s', 'A5s',
        // 84s+
        '84s', '94s', 'T4s', 'J4s', 'Q4s', 'K4s', 'A4s',
        // 74s+
        '74s', '84s', '94s', 'T4s', 'J4s', 'Q4s', 'K4s', 'A4s',
        // 63s+
        '63s', '73s', '83s', '93s', 'T3s', 'J3s', 'Q3s', 'K3s', 'A3s',
        // 53s+
        '53s', '63s', '73s', '83s', '93s', 'T3s', 'J3s', 'Q3s', 'K3s', 'A3s',
        // 43s
        '43s',
        // A7o-A2o
        'A2o', 'A3o', 'A4o', 'A5o', 'A6o', 'A7o',
        // KTo-K4o
        'K4o', 'K5o', 'K6o', 'K7o', 'K8o', 'K9o', 'KTo',
        // Q8o+
        'Q8o', 'Q9o', 'QTo', 'QJo', 'QKo',
        // J8o+
        'J8o', 'J9o', 'JTo', 'JQo', 'JKo',
        // T8o+
        'T8o', 'T9o', 'TJo', 'TQo', 'TKo',
        // 97o+
        '97o', 'T7o', 'J7o', 'Q7o', 'K7o', 'A7o',
        // 87o
        '87o',
        // 76o
        '76o'
    ]
};

// Variables globales
let currentHand = '';
let stats = {
    correct: 0,
    total: 0,
    currentStreak: 0,
    bestStreak: 0
};

// Cache para búsqueda rápida de manos
let rangeCache = {
    '3BET': new Set(),
    'CALL': new Set(),
    'FOLD': new Set()
};

// Inicializar caches
function initRangeCache() {
    // Limpiar caches
    rangeCache['3BET'].clear();
    rangeCache['CALL'].clear();
    rangeCache['FOLD'].clear();
    
    // Llenar cache de 3BET
    RANGOS_BB_vs_BTN['3BET'].forEach(hand => {
        expandHandNotation(hand).forEach(expandedHand => {
            rangeCache['3BET'].add(expandedHand);
        });
    });
    
    // Llenar cache de CALL
    RANGOS_BB_vs_BTN['CALL'].forEach(hand => {
        expandHandNotation(hand).forEach(expandedHand => {
            rangeCache['CALL'].add(expandedHand);
        });
    });
    
    // Calcular y mostrar porcentajes
    updateRangePercentages();
}

// Expandir notaciones como "44+", "A5s+", etc.
function expandHandNotation(notation) {
    const expanded = new Set();
    const rankOrder = ['2','3','4','5','6','7','8','9','T','J','Q','K','A'];
    
    // Pares (AA, KK, etc.)
    if (notation.length === 2 && notation[0] === notation[1]) {
        expanded.add(notation);
        return Array.from(expanded);
    }
    
    // Suited hands (AKs, etc.)
    if (notation.length === 3 && notation[2] === 's') {
        expanded.add(notation);
        return Array.from(expanded);
    }
    
    // Offsuit hands (AKo, etc.)
    if (notation.length === 3 && notation[2] === 'o') {
        expanded.add(notation);
        return Array.from(expanded);
    }
    
    return [notation];
}

// Actualizar porcentajes de rango
function updateRangePercentages() {
    const totalCombos = 1326; // Total de combinaciones posibles en NLH
    
    // Contar combinaciones aproximadas
    let threeBetCombos = 0;
    let callCombos = 0;
    
    // Estimación simple basada en tipos de manos
    RANGOS_BB_vs_BTN['3BET'].forEach(hand => {
        if (hand.length === 2) threeBetCombos += 6; // Pares: 6 combos
        else if (hand[2] === 's') threeBetCombos += 4; // Suited: 4 combos
        else if (hand[2] === 'o') threeBetCombos += 12; // Offsuit: 12 combos
    });
    
    RANGOS_BB_vs_BTN['CALL'].forEach(hand => {
        if (hand.length === 2) callCombos += 6;
        else if (hand[2] === 's') callCombos += 4;
        else if (hand[2] === 'o') callCombos += 12;
    });
    
    const foldCombos = totalCombos - threeBetCombos - callCombos;
    
    // Actualizar display
    document.getElementById('foldPercent').textContent = 
        ((foldCombos / totalCombos) * 100).toFixed(1) + '%';
    document.getElementById('callPercent').textContent = 
        ((callCombos / totalCombos) * 100).toFixed(1) + '%';
    document.getElementById('betPercent').textContent = 
        ((threeBetCombos / totalCombos) * 100).toFixed(1) + '%';
}

// Inicializar
function init() {
    initRangeCache();
    generateRandomHand();
    updateStats();
}

// Generar mano aleatoria de NLH (2 cartas)
function generateRandomHand() {
    const ranks = ['A', 'K', 'Q', 'J', 'T', '9', '8', '7', '6', '5', '4', '3', '2'];
    const suits = ['s', 'h', 'd', 'c'];
    const suitSymbols = {'s': '♠', 'h': '♥', 'd': '♦', 'c': '♣'};
    
    // Generar dos cartas diferentes
    let card1, card2;
    do {
        const rank1 = ranks[Math.floor(Math.random() * ranks.length)];
        const rank2 = ranks[Math.floor(Math.random() * ranks.length)];
        const suit1 = suits[Math.floor(Math.random() * suits.length)];
        const suit2 = suits[Math.floor(Math.random() * suits.length)];
        
        card1 = { rank: rank1, suit: suit1 };
        card2 = { rank: rank2, suit: suit2 };
    } while (card1.rank === card2.rank && card1.suit === card2.suit);
    
    // Ordenar (alta primero)
    const rankOrder = {'A':14, 'K':13, 'Q':12, 'J':11, 'T':10, '9':9, '8':8, '7':7, '6':6, '5':5, '4':4, '3':3, '2':2};
    const isPair = card1.rank === card2.rank;
    const isSuited = card1.suit === card2.suit;
    
    let handNotation;
    if (isPair) {
        handNotation = card1.rank + card2.rank; // AA, KK, etc.
    } else {
        // Ordenar de mayor a menor
        let highCard, lowCard;
        if (rankOrder[card1.rank] > rankOrder[card2.rank]) {
            highCard = card1;
            lowCard = card2;
        } else {
            highCard = card2;
            lowCard = card1;
        }
        
        handNotation = highCard.rank + lowCard.rank + (isSuited ? 's' : 'o');
    }
    
    currentHand = handNotation;
    displayHand(card1, card2, suitSymbols);
    
    return handNotation;
}

// Mostrar mano en pantalla
function displayHand(card1, card2, suitSymbols) {
    const handDisplay = document.getElementById('handDisplay');
    
    const cards = [
        { rank: card1.rank, suit: suitSymbols[card1.suit], colorClass: card1.suit },
        { rank: card2.rank, suit: suitSymbols[card2.suit], colorClass: card2.suit }
    ];
    
    handDisplay.innerHTML = cards.map(card => {
        return `<div class="card-chip">
            <b class="${card.colorClass}">${card.rank}${card.suit}</b>
        </div>`;
    }).join('');
    
    // Mostrar notación
    handDisplay.innerHTML += `
        <div class="hand-notation">${currentHand}</div>
        <div style="font-size: 14px; color: var(--muted); margin-top: 5px;">
            ${getHandTypeDescription(currentHand)}
        </div>
    `;
}

// Obtener descripción del tipo de mano
function getHandTypeDescription(hand) {
    if (hand.length === 2) {
        const rankOrder = {'A':14, 'K':13, 'Q':12, 'J':11, 'T':10, '9':9, '8':8, '7':7, '6':6, '5':5, '4':4, '3':3, '2':2};
        const rank = hand[0];
        if (rankOrder[rank] >= 11) return 'Pocket Pair Premium';
        if (rankOrder[rank] >= 8) return 'Pocket Pair Media';
        return 'Pocket Pair Baja';
    } else if (hand[2] === 's') {
        if (hand[0] === 'A') return 'Ace Suited';
        if (['K','Q','J'].includes(hand[0])) return 'Broadway Suited';
        return 'Suited Connector';
    } else {
        if (hand[0] === 'A') return 'Ace Offsuit';
        if (['K','Q','J'].includes(hand[0])) return 'Broadway Offsuit';
        return 'Offsuit Hand';
    }
}

// Verificar acción correcta para la mano actual
function getCorrectAction() {
    // Primero verificar si está en 3BET (más agresivo primero)
    if (isHandInRange(currentHand, '3BET')) {
        return '3BET';
    }
    
    // Luego verificar si está en CALL
    if (isHandInRange(currentHand, 'CALL')) {
        return 'CALL';
    }
    
    // Si no está en ninguno, es FOLD
    return 'FOLD';
}

// Verificar si mano está en un rango específico
function isHandInRange(hand, action) {
    // Para pares (AA, KK, etc.)
    if (hand.length === 2) {
        // Verificar si el par está en el rango
        return rangeCache[action].has(hand);
    }
    
    // Para manos no-pares (AKs, AKo, etc.)
    // Primero verificar la notación exacta
    if (rangeCache[action].has(hand)) {
        return true;
    }
    
    // Si no está exactamente, podría estar en un rango como "A5s+"
    // Esta es una simplificación - en producción necesitarías expandir rangos como "A5s+"
    return false;
}

// Verificar decisión del usuario
function checkDecision(userDecision) {
    document.getElementById('decisionButtons').style.display = 'none';
    
    const correctAction = getCorrectAction();
    stats.total++;
    
    const isCorrect = userDecision === correctAction;
    
    if (isCorrect) {
        stats.correct++;
        stats.currentStreak++;
        if (stats.currentStreak > stats.bestStreak) {
            stats.bestStreak = stats.currentStreak;
        }
        showFeedback(true, correctAction, userDecision);
    } else {
        stats.currentStreak = 0;
        showFeedback(false, correctAction, userDecision);
    }
    
    updateStats();
    document.getElementById('nextBtn').style.display = 'block';
}

// Mostrar feedback

    
    // Explicación basada en la acción correcta
    switch(correctAction) {
        case '3BET':
            explanation = 'Mano fuerte para 3-betear. Aplicas presión y juegas en posición con iniciativa.';
            advice = 'Balancea tu rango de 3-bets con valor y algunos bluffs sutiles.';
            break;
        case 'CALL':
            explanation = 'Mano defendible con buenas implicaciones post-flop. Call con pot odds adecuadas.';
            advice = 'En BB vs BTN, defiende ampliamente pero sé selectivo post-flop OOP.';
            break;
        case 'FOLD':
            explanation = 'Mano demasiado débil o con mala jugabilidad OOP. Fold para preservar stack.';
            advice = 'No sobredefiendas manos marginales fuera de posición contra un robo.';
            break;
    }
    
    feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
    feedback.innerHTML = `
        <div style="font-size: 24px; margin-bottom: 15px;">
            ${isCorrect ? '✅ ¡DECISIÓN CORRECTA!' : '❌ DECISIÓN INCORRECTA'}
        </div>
        
        <div style="margin-bottom: 20px; font-size: 18px; padding: 15px; background: rgba(0,0,0,0.2); border-radius: 8px;">
            <strong>Mano:</strong> ${currentHand}<br>
            <strong>Tipo:</strong> ${handType}<br>
            <strong>Tu jugada:</strong> ${userAction}<br>
            <strong>Jugada correcta:</strong> ${correctAction}
        </div>
        
        <div class="action-explanation">
            <strong>📖 Explicación:</strong><br>
            ${explanation}<br><br>
            
            <strong>💡 Estrategia BB vs BTN:</strong><br>
            ${advice}<br><br>
            
            <strong>🎯 Tu rango personal:</strong><br>
            • 3-Bet: Manos premium y semi-bluffs<br>
            • Call: Manos defendibles con implicaciones<br>
            • Fold: Manos marginales OOP
        </div>
        
        ${!isCorrect ? `
        <div style="margin-top: 20px; padding: 15px; background: rgba(76, 201, 240, 0.1); border-radius: 8px; border-left: 4px solid var(--accent);">
            <strong>🧠 Entrenamiento mental:</strong><br>
            Recuerda: "${currentHand}" es una mano de <strong>${correctAction}</strong><br>
            en BB vs BTN contra apertura de 2.5x.
        </div>
        ` : ''}
    `;
}

// Actualizar estadísticas
function updateStats() {
    const accuracy = stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) : 0;
    
    document.getElementById('currentScore').textContent = stats.correct;
    document.getElementById('accuracy').textContent = `${accuracy}%`;
    document.getElementById('handsPlayed').textContent = stats.total;
    document.getElementById('currentStreak').textContent = stats.currentStreak;
}

// Siguiente mano
function nextHand() {
    generateRandomHand();
    document.getElementById('feedback').style.display = 'none';
    document.getElementById('nextBtn').style.display = 'none';
    document.getElementById('decisionButtons').style.display = 'grid';
}

// Inicializar al cargar
window.onload = init;

// Atajos de teclado
document.addEventListener('keydown', function(e) {
    if (e.key === '1' || e.key === 'F1') {
        checkDecision('FOLD');
    } else if (e.key === '2' || e.key === 'F2') {
        checkDecision('CALL');
    } else if (e.key === '3' || e.key === 'F3') {
        checkDecision('3BET');
    } else if (e.key === ' ' || e.key === 'Enter') {
        if (document.getElementById('nextBtn').style.display !== 'none') {
            nextHand();
        }
    }
});
</script>
</body>
</html>